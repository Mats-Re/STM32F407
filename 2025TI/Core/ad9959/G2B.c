#include <stdio.h>
#include "stdbool.h"
#include "math.h"
// 二维数组定义：30行（频率100~3000 Hz，步长100），11列（电压1.0~2.0 V，步长0.1）
const float data[30][11] = {
    // f = 100 Hz
    {0.02473, 0.02720, 0.02967, 0.03214, 0.03462, 0.03709, 0.03956, 0.04203, 0.04451, 0.04698, 0.04945},
    // f = 200 Hz
    {0.02571, 0.02828, 0.03085, 0.03342, 0.03599, 0.03856, 0.04113, 0.04370, 0.04627, 0.04884, 0.05141},
    // f = 300 Hz
    {0.02727, 0.03000, 0.03272, 0.03545, 0.03818, 0.04090, 0.04363, 0.04636, 0.04908, 0.05181, 0.05454},
    // f = 400 Hz
    {0.02933, 0.03226, 0.03520, 0.03813, 0.04106, 0.04400, 0.04693, 0.04986, 0.05280, 0.05573, 0.05866},
    // f = 500 Hz
    {0.03181, 0.03499, 0.03817, 0.04135, 0.04453, 0.04771, 0.05089, 0.05407, 0.05725, 0.06043, 0.06361},
    // f = 600 Hz
    {0.03462, 0.03808, 0.04155, 0.04501, 0.04847, 0.05193, 0.05540, 0.05886, 0.06232, 0.06578, 0.06925},
    // f = 700 Hz
    {0.03772, 0.04149, 0.04526, 0.04903, 0.05281, 0.05658, 0.06035, 0.06412, 0.06789, 0.07167, 0.07544},
    // f = 800 Hz
    {0.04105, 0.04515, 0.04926, 0.05336, 0.05747, 0.06157, 0.06568, 0.06978, 0.07389, 0.07799, 0.08210},
    // f = 900 Hz
    {0.04458, 0.04904, 0.05350, 0.05795, 0.06241, 0.06687, 0.07133, 0.07578, 0.08024, 0.08470, 0.08916},
    // f = 1000 Hz
    {0.04829, 0.05311, 0.05794, 0.06277, 0.06760, 0.07243, 0.07726, 0.08209, 0.08692, 0.09174, 0.09657},
    // f = 1100 Hz
    {0.05215, 0.05737, 0.06258, 0.06780, 0.07301, 0.07823, 0.08344, 0.08866, 0.09387, 0.09909, 0.10430},
    // f = 1200 Hz
    {0.05616, 0.06178, 0.06740, 0.07301, 0.07863, 0.08425, 0.08986, 0.09548, 0.10110, 0.10671, 0.11233},
    // f = 1300 Hz
    {0.06032, 0.06635, 0.07238, 0.07841, 0.08444, 0.09047, 0.09650, 0.10254, 0.10857, 0.11460, 0.12063},
    // f = 1400 Hz
    {0.06460, 0.07106, 0.07752, 0.08398, 0.09044, 0.09690, 0.10336, 0.10982, 0.11628, 0.12274, 0.12920},
    // f = 1500 Hz
    {0.06902, 0.07592, 0.08282, 0.08972, 0.09662, 0.10352, 0.11042, 0.11733, 0.12423, 0.13113, 0.13803},
    // f = 1600 Hz
    {0.07356, 0.08092, 0.08827, 0.09563, 0.10298, 0.11034, 0.11770, 0.12505, 0.13241, 0.13976, 0.14712},
    // f = 1700 Hz
    {0.07823, 0.08606, 0.09388, 0.10170, 0.10953, 0.11735, 0.12517, 0.13299, 0.14082, 0.14864, 0.15646},
    // f = 1800 Hz
    {0.08303, 0.09134, 0.09964, 0.10794, 0.11625, 0.12455, 0.13285, 0.14116, 0.14946, 0.15776, 0.16607},
    // f = 1900 Hz
    {0.08796, 0.09676, 0.10556, 0.11435, 0.12315, 0.13195, 0.14074, 0.14954, 0.15834, 0.16713, 0.17593},
    // f = 2000 Hz
    {0.09303, 0.10233, 0.11163, 0.12094, 0.13024, 0.13954, 0.14884, 0.15815, 0.16745, 0.17675, 0.18606},
    // f = 2100 Hz
    {0.09822, 0.10805, 0.11787, 0.12769, 0.13751, 0.14734, 0.15716, 0.16698, 0.17680, 0.18662, 0.19645},
    // f = 2200 Hz
    {0.10355, 0.11391, 0.12427, 0.13462, 0.14498, 0.15533, 0.16569, 0.17604, 0.18640, 0.19675, 0.20711},
    // f = 2300 Hz
    {0.10902, 0.11993, 0.13083, 0.14173, 0.15263, 0.16353, 0.17444, 0.18534, 0.19624, 0.20714, 0.21805},
    // f = 2400 Hz
    {0.11463, 0.12609, 0.13756, 0.14902, 0.16048, 0.17195, 0.18341, 0.19487, 0.20633, 0.21780, 0.22926},
    // f = 2500 Hz
    {0.12038, 0.13242, 0.14446, 0.15649, 0.16853, 0.18057, 0.19261, 0.20465, 0.21668, 0.22872, 0.24076},
    // f = 2600 Hz
    {0.12627, 0.13890, 0.15153, 0.16416, 0.17678, 0.18941, 0.20204, 0.21466, 0.22729, 0.23992, 0.25255},
    // f = 2700 Hz
    {0.13231, 0.14554, 0.15877, 0.17201, 0.18524, 0.19847, 0.21170, 0.22493, 0.23816, 0.25139, 0.26462},
    // f = 2800 Hz
    {0.13850, 0.15235, 0.16620, 0.18005, 0.19390, 0.20775, 0.22160, 0.23545, 0.24930, 0.26315, 0.27700},
    // f = 2900 Hz
    {0.14484, 0.15932, 0.17381, 0.18829, 0.20277, 0.21726, 0.23174, 0.24623, 0.26071, 0.27519, 0.28968},
    // f = 3000 Hz
    {0.15133, 0.16646, 0.18159, 0.19673, 0.21186, 0.22699, 0.24213, 0.25726, 0.27239, 0.28752, 0.30266}
};
/**
 * 根据频率和电压获取对应的值
 * @param f 频率 (100-3000 Hz，必须为100的整数倍)
 * @param V 电压 (1.0-2.0 V，必须为0.1的倍数)
 * @param result 存储查询结果的指针
 * @return true 查询成功，false 参数无效
 */
bool getValue(int f, float V, float* result) {
    // 验证频率范围及步长
    if (f < 100 || f > 3000 || f % 100 != 0) {
        return false;
    }
    
    // 验证电压范围及步长 (使用浮点数容差)
    if (V < 1.0f || V > 2.0f || fabsf(roundf(V * 10) - V * 10) > 0.01f) {
        return false;
    }
    
    // 计算行索引 (f: 100->0, 200->1, ... 3000->29)
    int row = (f - 100) / 100;
    
    // 计算列索引 (V: 1.0->0, 1.1->1, ... 2.0->10)
    int col = (int)roundf((V - 1.0f) * 10.0f);
    
    *result = data[row][col];
    return true;
}